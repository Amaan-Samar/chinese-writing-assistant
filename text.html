<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipboard Detection Example</title>
    <style>
        #message {
            margin-top: 10px;
            color: green;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Clipboard Detection Example</h1>
    <button id="checkClipboardButton">Check Clipboard</button>
    <div id="message" style="display:none;"></div>

    <script>
        async function checkClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                if (text) {
                    const messageDiv = document.getElementById('message');
                    messageDiv.innerText = `You have copied text: "${text}"`;
                    messageDiv.style.display = 'block'; // Show the message
                } else {
                    alert('No text found in clipboard.');
                }
            } catch (err) {
                console.error('Failed to read clipboard contents: ', err);
                alert('Failed to read clipboard contents. Make sure you have copied some text and try again.');
            }
        }

        document.getElementById('checkClipboardButton').addEventListener('click', checkClipboard);
    </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipboard Detection Example</title>
    <style>
        #message {
            margin-top: 10px;
            color: green;
            font-weight: bold;
        }
        #pasteButton {
            display: none; /* Initially hidden */
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Clipboard Detection Example</h1>
    <button id="pasteButton">Paste</button>
    <div id="message"></div>

    <script>
        // Function to check clipboard content
        async function checkClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                if (text) {
                    const messageDiv = document.getElementById('message');
                    messageDiv.innerText = `You have copied text: "${text}"`;
                    messageDiv.style.display = 'block'; // Show the message
                } else {
                    document.getElementById('message').style.display = 'none'; // Hide message if no text
                }
            } catch (err) {
                console.error('Failed to read clipboard contents: ', err);
                alert('Failed to read clipboard contents. Make sure you have copied some text and try again.');
            }
        }

        // Function to handle copy event
        function handleCopyEvent() {
            const pasteButton = document.getElementById('pasteButton');
            pasteButton.style.display = 'inline-block'; // Show the paste button
            
            // Directly check clipboard after copy event
            checkClipboard(); // Check clipboard immediately after copy
        }

        // Event listener for the copy event on the document
        document.addEventListener('copy', handleCopyEvent);

        // Optional: Add click event for the paste button (if needed)
        document.getElementById('pasteButton').addEventListener('click', async () => {
            await checkClipboard(); // Re-check clipboard when paste button is clicked
        });
    </script>
</body>
</html>
